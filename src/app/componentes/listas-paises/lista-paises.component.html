<div class="container-fluid px-2 px-md-5">
  <!-- Filtros -->
  <div class="row mb-4">
    <!-- Filtro por nombre -->
    <div class="col-12 col-md-4 mb-2">
      <input
        type="text"
        class="form-control"
        placeholder="🔎 Buscar por nombre..."
        [(ngModel)]="terminoBusqueda"
      />
    </div>

    <!-- Filtro por capital -->
    <div class="col-12 col-md-4 mb-2">
      <input
        type="text"
        class="form-control"
        placeholder="🏙️ Filtrar por capital..."
        [(ngModel)]="filtroCapital"
      />
    </div>

    <!-- Filtro por región -->
    <div class="col-12 col-md-4 mb-2">
      <select class="form-select" [(ngModel)]="filtroRegion">
        <option value="">🌍 Todas las regiones</option>
        <option *ngFor="let region of regionesUnicas" [value]="region">
          {{ region }}
        </option>
      </select>
    </div>

    <!-- Filtro por población -->
    <div class="col-12 col-md-6 mb-2">
      <input
        type="number"
        class="form-control"
        placeholder="👥 Población mínima"
        [(ngModel)]="poblacionMin"
        min="0"
      />
    </div>

    <div class="col-12 col-md-6 mb-2">
      <input
        type="number"
        class="form-control"
        placeholder="👥 Población máxima"
        [(ngModel)]="poblacionMax"
        min="0"
      />
    </div>

    <!-- Botón limpiar -->
    <div class="col-12 text-center mb-2">
      <button class="btn btn-outline-danger btn-sm" (click)="limpiarFiltros()">
        🗑️ Limpiar filtros
      </button>
      <small class="text-warning d-block mt-1">
        Mostrando {{ filtrarPaises().length }} de {{ paises().length }} países
      </small>
    </div>
  </div>

  <!-- Lista de países -->
  <div class="row">
    <div *ngFor="let pais of filtrarPaises()" class="col-12 col-md-4 mb-4">
      <div class="card h-100">
        <div class="bandera-container">
          <img
            [src]="pais.flags.png || pais.flags.svg"
            [alt]="pais.flags.alt || pais.name.common"
            class="bandera"
          />
        </div>
        <div class="card-body">
          <h3 class="card-title text-center">{{ pais.name.common }}</h3>
          <div class="row">
            <div class="col-6 text-center">
              <p><strong>Oficial (EN):</strong><br />{{ pais.name.official }}</p>
              <p><strong>Oficial (nativo):</strong><br />{{ getNativeOfficialName(pais) }}</p>
              <p><strong>Idiomas:</strong><br />{{ getLanguages(pais) }}</p>
            </div>
            <div class="col-6 text-center">
              <p><strong>Capital:</strong><br />{{ pais.capital?.[0] || '—' }}</p>
              <p><strong>Región:</strong><br />{{ pais.region || '—' }}</p>
              <p><strong>Población:</strong><br />{{ pais.population | number }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
